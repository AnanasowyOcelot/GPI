services:
#    gpi_offer.example:
#        class: GPI\OfferBundle\Example
#        arguments: [@service_id, "plain_value", %parameter%]
    gpi_offer.admin.offer:
        class: GPI\OfferBundle\Admin\OfferAdmin
        arguments: [~, GPI\OfferBundle\Entity\Offer, GPIOfferBundle:OfferAdmin]
        tags:
            - {name: sonata.admin, manager_type: orm, group: admin, label: Offer}
    gpi_offer.offer_repository:
        class: GPI\OfferBundle\Entity\OfferRepository
        factory_service: doctrine.orm.default_entity_manager
        factory_method: getRepository
        arguments:
            - GPI\OfferBundle\Entity\Offer
    gpi_sonata.category_repository:
        class: GPI\Sonata\ClassificationBundle\Entity\CategoryRepository
        factory_service: doctrine.orm.default_entity_manager
        factory_method: getRepository
        arguments:
            - Application\Sonata\ClassificationBundle\Entity\Category
        calls:
            - [setOfferRootCategoryId, [%gpi_offer.root_category_id%]]
    gpi.block.service.offer:
        id: gpi.block.service.offer
        class: GPI\Sonata\BlockBundle\Block\OfferBlockService
        arguments:
            - gpi.block.service.offer
            - @templating
            - @gpi_offer.offer_repository
            - @doctrine.orm.entity_manager
        tags:
            - {name: sonata.block}
            - { name: knp_paginator.injectable, paginator: knp_paginator }
        calls:
            - [setRequest, [@request_stack]]
    gpi.block.service.categories:
        id: gpi.block.service.categories
        class: GPI\Sonata\BlockBundle\Block\CategoriesBlockService
        arguments:
            - gpi.block.service.categories
            - @templating
            - @gpi_sonata.category_repository
        tags:
            - {name: sonata.block}
        calls:
            - [setRequest, [@request_stack]]
    gpi_offer.form.offer:
        class: GPI\OfferBundle\Form\OfferType
        tags:
            - { name: form.type, alias: offer }
    gpi_offer.form.document:
        class: GPI\OfferBundle\Form\DocumentType
        tags:
            - { name: form.type, alias: document }